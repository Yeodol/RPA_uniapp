"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var I=Object.create;var p=Object.defineProperty,P=Object.defineProperties,k=Object.getOwnPropertyDescriptor,_=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertyNames,b=Object.getOwnPropertySymbols,A=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var w=(t,a,o)=>a in t?p(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,B=(t,a)=>{for(var o in a||(a={}))x.call(a,o)&&w(t,o,a[o]);if(b)for(var o of b(a))L.call(a,o)&&w(t,o,a[o]);return t},C=(t,a)=>P(t,_(a));var E=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports);var j=(t,a,o,s)=>{if(a&&typeof a=="object"||typeof a=="function")for(let i of R(a))!x.call(t,i)&&i!==o&&p(t,i,{get:()=>a[i],enumerable:!(s=k(a,i))||s.enumerable});return t};var v=(t,a,o)=>(o=t!=null?I(A(t)):{},j(a||!t||!t.__esModule?p(o,"default",{value:t,enumerable:!0}):o,t));var h=E((Y,D)=>{D.exports=Vue});var Q=v(h());function l(t,a,...o){uni.__log__?uni.__log__(t,a,...o):console[t].apply(console,[...o,a])}function S(t,a){return typeof t=="string"?a:t}var F={apiBaseUrl:"http://1.95.90.167:5032",apiPaths:{dataList:"/api/data",dataDelete:"/api/data/delete",files:"/api/files",txtData:"/data/txt",reports:{list:"/api/reports/list",generate:"/api/reports/generate",view:"/api/reports/view",delete:"/api/reports/delete",check:"/api/reports/check"}},database:{username:"apppet",password:"apppet12345",database:"apppet",table:"data"},appInfo:{name:"\u6570\u636E\u7BA1\u7406\u7CFB\u7EDF",version:"1.0.0",company:"\u9752\u5C9B\u82F1\u8D5B\u7279\u751F\u7269\u79D1\u6280\u6709\u9650\u516C\u53F8",copyright:"\xA9 2023 \u9752\u5C9B\u82F1\u8D5B\u7279\u751F\u7269\u79D1\u6280\u6709\u9650\u516C\u53F8. \u4FDD\u7559\u6240\u6709\u6743\u5229."}},f="/static/chazhao.png",T="/static/shanchu.png";var e=v(h());var g=(t,a)=>{let o=t.__vccOpts||t;for(let[s,i]of a)o[s]=i;return o};var z={name:"page-head",props:{title:{type:String,default:""}}};function W(t,a,o,s,i,r){return(0,e.openBlock)(),(0,e.createElementBlock)("view",{class:"common-page-head",renderWhole:!0},[(0,e.createElementVNode)("view",{class:"common-page-head-title"},[(0,e.createElementVNode)("u-text",null,(0,e.toDisplayString)(o.title),1)])])}var N=g(z,[["render",W]]),H={button:{"":{marginTop:"30rpx",marginLeft:0,marginRight:0}},"btn-area":{"":{paddingTop:"30rpx"}}},K={data(){return{title:"tababr",hasSetTabBarBadge:!1,hasShownTabBarRedDot:!1,hasCustomedStyle:!1,hasCustomedItem:!1,hasHiddenTabBar:!1}},destroyed(){if(this.hasSetTabBarBadge&&uni.removeTabBarBadge({index:1}),this.hasShownTabBarRedDot&&uni.hideTabBarRedDot({index:1}),this.hasHiddenTabBar&&uni.showTabBar(),this.hasCustomedStyle&&uni.setTabBarStyle({color:"#7A7E83",selectedColor:"#007AFF",backgroundColor:"#F8F8F8",borderStyle:"black"}),this.hasCustomedItem){let t={index:1,text:"\u63A5\u53E3",iconPath:"/static/api.png",selectedIconPath:"/static/apiHL.png"};uni.setTabBarItem(t)}},methods:{navigateBack(){this.$emit("unmount")},setTabBarBadge(){this.hasShownTabBarRedDot&&(uni.hideTabBarRedDot({index:1}),this.hasShownTabBarRedDot=!this.hasShownTabBarRedDot),this.hasSetTabBarBadge?uni.removeTabBarBadge({index:1}):uni.setTabBarBadge({index:1,text:"1"}),this.hasSetTabBarBadge=!this.hasSetTabBarBadge},showTabBarRedDot(){this.hasSetTabBarBadge&&(uni.removeTabBarBadge({index:1}),this.hasSetTabBarBadge=!this.hasSetTabBarBadge),this.hasShownTabBarRedDot?uni.hideTabBarRedDot({index:1}):uni.showTabBarRedDot({index:1}),this.hasShownTabBarRedDot=!this.hasShownTabBarRedDot},hideTabBar(){this.hasHiddenTabBar?uni.showTabBar():uni.hideTabBar(),this.hasHiddenTabBar=!this.hasHiddenTabBar},customStyle(){this.hasCustomedStyle?uni.setTabBarStyle({color:"#7A7E83",selectedColor:"#007AFF",backgroundColor:"#F8F8F8",borderStyle:"black"}):uni.setTabBarStyle({color:"#FFF",selectedColor:"#007AFF",backgroundColor:"#000000",borderStyle:"black"}),this.hasCustomedStyle=!this.hasCustomedStyle},customItem(){let t={index:1,text:"\u63A5\u53E3",iconPath:"/static/api.png",selectedIconPath:"/static/apiHL.png"};this.hasCustomedItem||(t.text="API"),uni.setTabBarItem(t),this.hasCustomedItem=!this.hasCustomedItem}}};function O(t,a,o,s,i,r){let d=S((0,e.resolveDynamicComponent)("page-head"),N),n=(0,e.resolveComponent)("button");return(0,e.openBlock)(),(0,e.createElementBlock)("view",{class:"uni-padding-wrap",renderWhole:!0},[(0,e.createVNode)(d,{title:i.title},null,8,["title"]),(0,e.createVNode)(n,{class:"button",onClick:r.setTabBarBadge},{default:(0,e.withCtx)(()=>[(0,e.createTextVNode)((0,e.toDisplayString)(i.hasSetTabBarBadge?"\u79FB\u9664tab\u5FBD\u6807":"\u8BBE\u7F6Etab\u5FBD\u6807"),1)]),_:1},8,["onClick"]),(0,e.createVNode)(n,{class:"button",onClick:r.showTabBarRedDot},{default:(0,e.withCtx)(()=>[(0,e.createTextVNode)((0,e.toDisplayString)(i.hasShownTabBarRedDot?"\u79FB\u9664\u7EA2\u70B9":"\u663E\u793A\u7EA2\u70B9"),1)]),_:1},8,["onClick"]),(0,e.createVNode)(n,{class:"button",onClick:r.customStyle},{default:(0,e.withCtx)(()=>[(0,e.createTextVNode)((0,e.toDisplayString)(i.hasCustomedStyle?"\u79FB\u9664\u81EA\u5B9A\u4E49\u6837\u5F0F":"\u81EA\u5B9A\u4E49Tab\u6837\u5F0F"),1)]),_:1},8,["onClick"]),(0,e.createVNode)(n,{class:"button",onClick:r.customItem},{default:(0,e.withCtx)(()=>[(0,e.createTextVNode)((0,e.toDisplayString)(i.hasCustomedItem?"\u79FB\u9664\u81EA\u5B9A\u4E49\u4FE1\u606F":"\u81EA\u5B9A\u4E49Tab\u4FE1\u606F"),1)]),_:1},8,["onClick"]),(0,e.createVNode)(n,{class:"button",onClick:r.hideTabBar},{default:(0,e.withCtx)(()=>[(0,e.createTextVNode)((0,e.toDisplayString)(i.hasHiddenTabBar?"\u663E\u793ATabBar":"\u9690\u85CFTabBar"),1)]),_:1},8,["onClick"]),(0,e.createElementVNode)("view",{class:"btn-area"},[(0,e.createVNode)(n,{class:"button",type:"primary",onClick:r.navigateBack},{default:(0,e.withCtx)(()=>[(0,e.createTextVNode)("\u8FD4\u56DE\u4E0A\u4E00\u7EA7")]),_:1},8,["onClick"])])])}var V=g(K,[["render",O],["styles",[H]]]),U={"uni-icon":{"":{fontFamily:"uniicons",fontWeight:"normal"}},"uni-container":{"":{paddingTop:15,paddingRight:15,paddingBottom:15,paddingLeft:15,backgroundColor:"#F5F5F5",flex:1}},"uni-header-logo":{"":{paddingTop:15,paddingRight:15,paddingBottom:15,paddingLeft:15,flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:"10rpx"}},"uni-header-image":{"":{width:80,height:80}},"uni-hello-text":{"":{marginBottom:20}},"hello-text":{"":{color:"#7A7E83",fontSize:14,lineHeight:20}},"hello-link":{"":{color:"#7A7E83",fontSize:14,lineHeight:20}},"uni-panel":{"":{marginBottom:12}},"uni-panel-h":{"":{backgroundColor:"#ffffff","!flexDirection":"row","!alignItems":"center",paddingTop:12,paddingRight:12,paddingBottom:12,paddingLeft:12}},"uni-panel-h-on":{"":{backgroundColor:"#f0f0f0"}},"uni-panel-text":{"":{flex:1,color:"#000000",fontSize:14,fontWeight:"normal"}},"uni-panel-icon":{"":{marginLeft:15,color:"#999999",fontSize:14,fontWeight:"normal",transform:"rotate(0deg)",transitionDuration:0,transitionProperty:"transform"}},"uni-panel-icon-on":{"":{transform:"rotate(180deg)"}},"uni-navigate-item":{"":{flexDirection:"row",alignItems:"center",backgroundColor:"#FFFFFF",borderTopStyle:"solid",borderTopColor:"#f0f0f0",borderTopWidth:1,paddingTop:12,paddingRight:12,paddingBottom:12,paddingLeft:12,"backgroundColor:active":"#f8f8f8"}},"uni-navigate-text":{"":{flex:1,color:"#000000",fontSize:14,fontWeight:"normal"}},"uni-navigate-icon":{"":{marginLeft:15,color:"#999999",fontSize:14,fontWeight:"normal"}},"filter-container":{"":{backgroundColor:"#FFFFFF",borderRadius:8,paddingTop:12,paddingRight:12,paddingBottom:12,paddingLeft:12,marginBottom:10}},"search-box":{"":{flexDirection:"row",alignItems:"center",borderWidth:1,borderStyle:"solid",borderColor:"#E0E0E0",borderRadius:4,paddingTop:0,paddingRight:10,paddingBottom:0,paddingLeft:10,marginBottom:10}},"search-input":{"":{flex:1,height:36,fontSize:14}},"search-btn":{"":{width:36,height:36,justifyContent:"center",alignItems:"center"}},"search-icon":{"":{width:20,height:20}},"filter-options":{"":{flexDirection:"row",flexWrap:"wrap"}},"filter-item":{"":{flexDirection:"row",alignItems:"center",marginRight:15,marginBottom:10}},"filter-label":{"":{fontSize:13,color:"#333333",marginRight:5}},"filter-picker":{"":{width:120}},"picker-view":{"":{height:30,borderWidth:1,borderStyle:"solid",borderColor:"#E0E0E0",borderRadius:4,paddingTop:0,paddingRight:8,paddingBottom:0,paddingLeft:8,justifyContent:"center"}},"picker-text":{"":{fontSize:13,color:"#666666"}},"filter-actions":{"":{flexDirection:"row",justifyContent:"center",marginTop:10,width:100}},"filter-btn":{"":{paddingTop:6,paddingRight:15,paddingBottom:6,paddingLeft:15,borderRadius:4,marginTop:0,marginRight:10,marginBottom:0,marginLeft:10,alignItems:"center",justifyContent:"center"}},"filter-btn-text":{"":{fontSize:14},".refresh-btn ":{color:"#FFFFFF"},".reset-btn ":{color:"#666666"},".apply-btn ":{"!color":"#FFFFFF"}},"refresh-btn":{"":{backgroundColor:"#1E90FF",borderWidth:1,borderStyle:"solid",borderColor:"#1E90FF"}},"reset-btn":{"":{backgroundColor:"#F5F5F5",borderWidth:1,borderStyle:"solid",borderColor:"#DDDDDD"}},"apply-btn":{"":{backgroundColor:"#2871FA",borderWidth:1,borderStyle:"solid",borderColor:"#2871FA"}},"current-filters":{"":{backgroundColor:"#F0F8FF",borderRadius:4,paddingTop:8,paddingRight:12,paddingBottom:8,paddingLeft:12,flexDirection:"row",flexWrap:"wrap",marginBottom:10}},"current-filters-text":{"":{fontSize:12,color:"#666666"}},"current-filters-value":{"":{fontSize:12,color:"#2871FA",marginRight:8}},"records-list":{"":{flexDirection:"column"}},"record-item":{"":{flexDirection:"row",backgroundColor:"#FFFFFF",borderRadius:8,marginBottom:10,overflow:"hidden"}},"record-left-border":{"":{width:8,backgroundColor:"#2871FA"}},"record-content":{"":{flex:1,paddingTop:12,paddingRight:12,paddingBottom:12,paddingLeft:12}},"record-header":{"":{flexDirection:"row",alignItems:"center"}},"record-info":{"":{flex:1}},"record-row":{"":{flexDirection:"row",alignItems:"center",marginBottom:4}},"record-label":{"":{color:"#333333",fontSize:13,marginRight:5,width:70}},"record-value":{"":{color:"#666666",fontSize:13,flex:1}},"record-actions":{"":{flexDirection:"row",alignItems:"center"}},"action-btn":{"":{width:28,height:28,borderRadius:14,alignItems:"center",justifyContent:"center",marginLeft:8}},"action-img":{"":{width:16,height:16}},"view-btn":{"":{backgroundColor:"#2871FA"}},"delete-btn":{"":{backgroundColor:"#FF5252"}},"no-data":{"":{paddingTop:30,paddingRight:0,paddingBottom:30,paddingLeft:0,alignItems:"center",justifyContent:"center"}},"no-data-text":{"":{color:"#999999",fontSize:14}},pagination:{"":{flexDirection:"row",justifyContent:"center",alignItems:"center",flexWrap:"wrap",marginTop:15,paddingTop:10,paddingRight:0,paddingBottom:10,paddingLeft:0}},"pagination-btn":{"":{backgroundColor:"#2871FA",paddingTop:6,paddingRight:15,paddingBottom:6,paddingLeft:15,borderRadius:4,marginTop:0,marginRight:5,marginBottom:0,marginLeft:5},".disabled":{backgroundColor:"#CCCCCC",opacity:.6}},"pagination-info":{"":{paddingTop:5,paddingRight:10,paddingBottom:5,paddingLeft:10}},"pagination-text":{"":{color:"#FFFFFF",fontSize:14},".pagination-info ":{color:"#333333"}},"pagination-jump":{"":{flexDirection:"row",alignItems:"center",marginLeft:10,marginTop:8}},"jump-label":{"":{color:"#333333",fontSize:14,marginTop:0,marginRight:5,marginBottom:0,marginLeft:5}},"jump-input":{"":{width:50,height:30,borderWidth:1,borderStyle:"solid",borderColor:"#E0E0E0",borderRadius:4,fontSize:14,textAlign:"center",backgroundColor:"#FFFFFF"}},"jump-btn":{"":{marginLeft:5,paddingTop:6,paddingRight:10,paddingBottom:6,paddingLeft:10}},"file-modal":{"":{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999}},"modal-mask":{"":{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)"}},"modal-content":{"":{position:"absolute",top:50,left:50,transform:"translate(-50%, -50%)",width:80,maxWidth:"600px",backgroundColor:"#FFFFFF",borderRadius:8,overflow:"hidden"}},"modal-header":{"":{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:15,paddingRight:15,paddingBottom:15,paddingLeft:15,borderBottomWidth:1,borderBottomColor:"#EEEEEE"}},"modal-title":{"":{fontSize:16,color:"#333333",fontWeight:"bold"}},"modal-close":{"":{width:30,height:30,alignItems:"center",justifyContent:"center"}},"close-icon":{"":{fontSize:24,color:"#999999"}},"modal-body":{"":{paddingTop:15,paddingRight:15,paddingBottom:15,paddingLeft:15,maxHeight:60}},"file-content":{"":{fontSize:14,color:"#333333",lineHeight:1.5}},"@TRANSITION":{"uni-panel-icon":{duration:0,property:"transform"}}},M={components:{setTabBar:V},props:{hasLeftWin:{type:Boolean},leftWinActive:{type:String}},data(){return{records:[],config:F,currentPage:1,pageSize:10,jumpPage:"",searchKeyword:"",sortIndex:0,startDate:"",endDate:"",tempSearchKeyword:"",tempSortIndex:0,tempStartDate:"",tempEndDate:"",sortOptions:["\u6309\u65F6\u95F4\u5012\u5E8F","\u6309\u65F6\u95F4\u6B63\u5E8F"],showFileContent:!1,fileContent:"",currentFileName:""}},computed:{apiDataUrl(){return`${this.config.apiBaseUrl}${this.config.apiPaths.dataList}`},apiDeleteUrl(){return`${this.config.apiBaseUrl}${this.config.apiPaths.dataDelete}`},dbConfig(){return this.config.database},hasActiveFilters(){return this.searchKeyword||this.sortIndex!==0||this.startDate||this.endDate},filteredRecords(){let t=[...this.records];if(this.searchKeyword.trim()){let a=this.searchKeyword.trim().toLowerCase();t=t.filter(o=>o.data_name&&o.data_name.toLowerCase().includes(a))}return(this.startDate||this.endDate)&&(t=t.filter(a=>{if(!a.data_update)return!1;let o=new Date(a.data_update);if(this.startDate){let s=new Date(this.startDate);if(s.setHours(0,0,0,0),o<s)return!1}if(this.endDate){let s=new Date(this.endDate);if(s.setHours(23,59,59,999),o>s)return!1}return!0})),t.sort((a,o)=>{let s=new Date(a.data_update||0),i=new Date(o.data_update||0);return this.sortIndex===0?i-s:s-i}),t},totalPages(){return Math.max(1,Math.ceil(this.filteredRecords.length/this.pageSize))},currentPageRecords(){let t=(this.currentPage-1)*this.pageSize,a=t+this.pageSize;return this.filteredRecords.slice(t,a)}},watch:{filteredRecords(){this.currentPage=1}},onShareAppMessage(){return{title:"\u6B22\u8FCE\u4F53\u9A8Cuni-app",path:"/pages/tabBar/API/API"}},onNavigationBarButtonTap(t){uni.navigateTo({url:"/pages/about/about"})},onLoad(){uni.setNavigationBarTitle({title:"\u4E3B\u9875"}),this.fetchRecords()},onReady(){},onShow(){this.navigateFlag=!1},onHide(){},onPullDownRefresh(){this.fetchRecords()},methods:{formatDate(t){if(!t)return"";let a=new Date(t),o=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),i=String(a.getDate()).padStart(2,"0"),r=String(a.getHours()).padStart(2,"0"),d=String(a.getMinutes()).padStart(2,"0");return`${o}-${s}-${i} ${r}:${d}`},formatSimpleDate(t){if(!t)return"";let a=new Date(t),o=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),i=String(a.getDate()).padStart(2,"0");return`${o}-${s}-${i}`},handleSortChange(t){this.tempSortIndex=parseInt(t.detail.value)},handleStartDateChange(t){this.tempStartDate=t.detail.value,this.tempEndDate&&this.tempStartDate>this.tempEndDate&&(this.tempEndDate=this.tempStartDate)},handleEndDateChange(t){this.tempEndDate=t.detail.value,this.tempStartDate&&this.tempEndDate<this.tempStartDate&&(this.tempStartDate=this.tempEndDate)},resetFilters(){this.tempSearchKeyword="",this.tempSortIndex=0,this.tempStartDate="",this.tempEndDate="",this.searchKeyword="",this.sortIndex=0,this.startDate="",this.endDate="",this.currentPage=1},applyFilters(){this.searchKeyword=this.tempSearchKeyword,this.sortIndex=this.tempSortIndex,this.startDate=this.tempStartDate,this.endDate=this.tempEndDate,this.currentPage=1,uni.showToast({title:"\u7B5B\u9009\u5DF2\u5E94\u7528",icon:"success",duration:1500})},refreshData(){uni.showLoading({title:"\u5237\u65B0\u4E2D..."}),this.fetchRecords(),uni.showToast({title:"\u6570\u636E\u5DF2\u5237\u65B0",icon:"success",duration:1500})},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},handleJumpBlur(){if(this.jumpPage){let t=parseInt(this.jumpPage);(isNaN(t)||t<1||t>this.totalPages)&&(uni.showToast({title:"\u9875\u7801\u65E0\u6548",icon:"none"}),this.jumpPage="")}},jumpToPage(){if(this.jumpPage){let t=parseInt(this.jumpPage);!isNaN(t)&&t>=1&&t<=this.totalPages?this.currentPage=t:uni.showToast({title:"\u9875\u7801\u65E0\u6548",icon:"none"}),this.jumpPage=""}},fetchRecords(){uni.showLoading({title:"\u52A0\u8F7D\u4E2D"}),uni.request({url:this.apiDataUrl,method:"POST",data:this.dbConfig,success:t=>{if(t.statusCode===200&&t.data){if(Array.isArray(t.data)&&(l("log","at pages/tabBar/API/API.nvue:428",`\u6210\u529F\u83B7\u53D6\u8BB0\u5F55\uFF1A${t.data.length}\u6761`),t.data.length>0)){let a=t.data[0];l("log","at pages/tabBar/API/API.nvue:433","\u8BB0\u5F55\u7ED3\u6784\u793A\u4F8B:",a),"data_id"in a?l("log","at pages/tabBar/API/API.nvue:439","\u4F7F\u7528data_id\u4F5C\u4E3A\u8BB0\u5F55\u552F\u4E00\u6807\u8BC6"):l("warn","at pages/tabBar/API/API.nvue:437","\u8B66\u544A\uFF1A\u8BB0\u5F55\u7F3A\u5C11data_id\u5B57\u6BB5")}this.records=t.data,this.resetFilters()}else uni.showToast({title:"\u83B7\u53D6\u6570\u636E\u5931\u8D25",icon:"none"})},fail:t=>{l("error","at pages/tabBar/API/API.nvue:456","\u8BF7\u6C42\u5931\u8D25:",t),uni.showToast({title:"\u7F51\u7EDC\u8BF7\u6C42\u5931\u8D25",icon:"none"})},complete:()=>{uni.hideLoading(),uni.stopPullDownRefresh()}})},viewRecord(t){let a=t.data_name+".txt";l("log","at pages/tabBar/API/API.nvue:471",`\u8DF3\u8F6C\u5230\u5206\u6790\u9875\u9762\uFF0C\u6587\u4EF6\u540D: ${a}`),uni.navigateTo({url:`/pages/analysis/analysis?filename=${encodeURIComponent(a)}`})},deleteRecord(t){uni.showModal({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u8BB0\u5F55 "+t.data_name+` \u5417\uFF1F
\u6B64\u64CD\u4F5C\u5C06\u540C\u65F6\u5220\u9664\u6570\u636E\u5E93\u8BB0\u5F55\u548C\u5BF9\u5E94\u7684\u6570\u636E\u6587\u4EF6\uFF01`,success:a=>{if(a.confirm){if(l("log","at pages/tabBar/API/API.nvue:485","\u8981\u5220\u9664\u7684\u8BB0\u5F55:",t),l("log","at pages/tabBar/API/API.nvue:486","\u8BB0\u5F55ID:",t.data_id),!t.data_id&&t.data_id!==0){l("error","at pages/tabBar/API/API.nvue:490","\u9519\u8BEF\uFF1A\u8BB0\u5F55\u7F3A\u5C11data_id\u5B57\u6BB5"),uni.showToast({title:"\u8BB0\u5F55ID\u65E0\u6548",icon:"none"});return}let o=C(B({},this.dbConfig),{id:t.data_id});l("log","at pages/tabBar/API/API.nvue:503","\u53D1\u9001\u7684\u8BF7\u6C42\u6570\u636E:",o),uni.request({url:this.apiDeleteUrl,method:"POST",data:o,success:s=>{if(s.statusCode===200){let i=t.data_name+".txt",r=`${this.config.apiBaseUrl}/api/files/delete`;uni.request({url:r,method:"POST",data:{filename:i},success:d=>{let n=this.records.findIndex(c=>c.data_id===t.data_id);n!==-1&&this.records.splice(n,1),d.statusCode===200?uni.showToast({title:"\u8BB0\u5F55\u548C\u6587\u4EF6\u5DF2\u5220\u9664",icon:"success"}):(uni.showToast({title:"\u8BB0\u5F55\u5DF2\u5220\u9664\uFF0C\u4F46\u6587\u4EF6\u5220\u9664\u5931\u8D25",icon:"none"}),l("error","at pages/tabBar/API/API.nvue:540","\u6587\u4EF6\u5220\u9664\u5931\u8D25:",d.data))},fail:d=>{let n=this.records.findIndex(c=>c.data_id===t.data_id);n!==-1&&this.records.splice(n,1),uni.showToast({title:"\u8BB0\u5F55\u5DF2\u5220\u9664\uFF0C\u4F46\u6587\u4EF6\u5220\u9664\u8BF7\u6C42\u5931\u8D25",icon:"none"}),l("error","at pages/tabBar/API/API.nvue:554","\u6587\u4EF6\u5220\u9664\u8BF7\u6C42\u5931\u8D25:",d)}})}else uni.showToast({title:"\u5220\u9664\u8BB0\u5F55\u5931\u8D25",icon:"none"}),l("error","at pages/tabBar/API/API.nvue:562","\u5220\u9664\u8BB0\u5F55\u5931\u8D25:",s.data)},fail:s=>{uni.showToast({title:"\u7F51\u7EDC\u8BF7\u6C42\u5931\u8D25",icon:"none"}),l("error","at pages/tabBar/API/API.nvue:570","\u7F51\u7EDC\u8BF7\u6C42\u5931\u8D25:",s)}})}}})},closeFileContent(){this.showFileContent=!1,this.fileContent="",this.currentFileName=""}}};function q(t,a,o,s,i,r){let d=(0,e.resolveComponent)("picker");return(0,e.openBlock)(),(0,e.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,e.createElementVNode)("view",{class:"uni-container"},[(0,e.createElementVNode)("view",{class:"filter-container"},[(0,e.createElementVNode)("view",{class:"search-box"},[(0,e.createElementVNode)("u-input",{class:"search-input",modelValue:i.searchKeyword,onInput:a[0]||(a[0]=n=>i.searchKeyword=n.detail.value),placeholder:"\u641C\u7D22\u6570\u636E"},null,40,["modelValue"]),(0,e.createElementVNode)("view",{class:"search-btn"},[(0,e.createElementVNode)("u-image",{class:"search-icon",src:f})])]),(0,e.createElementVNode)("view",{class:"filter-options"},[(0,e.createElementVNode)("view",{class:"filter-item"},[(0,e.createElementVNode)("u-text",{class:"filter-label"},"\u6392\u5E8F\u65B9\u5F0F:"),(0,e.createVNode)(d,{class:"filter-picker",onChange:r.handleSortChange,value:i.tempSortIndex,range:i.sortOptions},{default:(0,e.withCtx)(()=>[(0,e.createElementVNode)("view",{class:"picker-view"},[(0,e.createElementVNode)("u-text",{class:"picker-text"},(0,e.toDisplayString)(i.sortOptions[i.tempSortIndex]),1)])]),_:1},8,["onChange","value","range"])]),(0,e.createElementVNode)("view",{class:"filter-item"},[(0,e.createElementVNode)("u-text",{class:"filter-label"},"\u8D77\u59CB\u65E5\u671F:"),(0,e.createVNode)(d,{class:"filter-picker",mode:"date",value:i.tempStartDate,onChange:r.handleStartDateChange},{default:(0,e.withCtx)(()=>[(0,e.createElementVNode)("view",{class:"picker-view"},[(0,e.createElementVNode)("u-text",{class:"picker-text"},(0,e.toDisplayString)(i.tempStartDate||"\u5168\u90E8"),1)])]),_:1},8,["value","onChange"])]),(0,e.createElementVNode)("view",{class:"filter-item"},[(0,e.createElementVNode)("u-text",{class:"filter-label"},"\u7ED3\u675F\u65E5\u671F:"),(0,e.createVNode)(d,{class:"filter-picker",mode:"date",value:i.tempEndDate,onChange:r.handleEndDateChange},{default:(0,e.withCtx)(()=>[(0,e.createElementVNode)("view",{class:"picker-view"},[(0,e.createElementVNode)("u-text",{class:"picker-text"},(0,e.toDisplayString)(i.tempEndDate||"\u5168\u90E8"),1)])]),_:1},8,["value","onChange"])]),(0,e.createElementVNode)("view",{class:"filter-actions"},[(0,e.createElementVNode)("view",{class:"filter-btn refresh-btn",onClick:a[1]||(a[1]=(...n)=>r.refreshData&&r.refreshData(...n))},[(0,e.createElementVNode)("u-text",{class:"filter-btn-text"},"\u5237\u65B0")]),(0,e.createElementVNode)("view",{class:"filter-btn reset-btn",onClick:a[2]||(a[2]=(...n)=>r.resetFilters&&r.resetFilters(...n))},[(0,e.createElementVNode)("u-text",{class:"filter-btn-text"},"\u91CD\u7F6E")]),(0,e.createElementVNode)("view",{class:"filter-btn apply-btn",onClick:a[3]||(a[3]=(...n)=>r.applyFilters&&r.applyFilters(...n))},[(0,e.createElementVNode)("u-text",{class:"filter-btn-text"},"\u786E\u8BA4\u7B5B\u9009")])])])]),r.hasActiveFilters?((0,e.openBlock)(),(0,e.createElementBlock)("view",{key:0,class:"current-filters"},[(0,e.createElementVNode)("u-text",{class:"current-filters-text"},"\u5F53\u524D\u7B5B\u9009: "),i.searchKeyword?((0,e.openBlock)(),(0,e.createElementBlock)("u-text",{key:0,class:"current-filters-value"},'\u5173\u952E\u8BCD"'+(0,e.toDisplayString)(i.searchKeyword)+'" ',1)):(0,e.createCommentVNode)("",!0),i.sortIndex===1?((0,e.openBlock)(),(0,e.createElementBlock)("u-text",{key:1,class:"current-filters-value"},"\u65F6\u95F4\u6B63\u5E8F ")):(0,e.createCommentVNode)("",!0),i.startDate||i.endDate?((0,e.openBlock)(),(0,e.createElementBlock)("u-text",{key:2,class:"current-filters-value"}," \u65E5\u671F"+(0,e.toDisplayString)(i.startDate?r.formatSimpleDate(i.startDate):"\u8D77\u59CB")+"\u81F3"+(0,e.toDisplayString)(i.endDate?r.formatSimpleDate(i.endDate):"\u73B0\u5728"),1)):(0,e.createCommentVNode)("",!0)])):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("view",{class:"records-list"},[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.currentPageRecords,(n,c)=>((0,e.openBlock)(),(0,e.createElementBlock)("view",{class:"record-item",key:c},[(0,e.createElementVNode)("view",{class:"record-left-border"}),(0,e.createElementVNode)("view",{class:"record-content"},[(0,e.createElementVNode)("view",{class:"record-header"},[(0,e.createElementVNode)("view",{class:"record-info"},[(0,e.createElementVNode)("view",{class:"record-row"},[(0,e.createElementVNode)("u-text",{class:"record-label"},"\u6570\u636E\u540D\u79F0:"),(0,e.createElementVNode)("u-text",{class:"record-value"},(0,e.toDisplayString)(n.data_name),1)]),(0,e.createElementVNode)("view",{class:"record-row"},[(0,e.createElementVNode)("u-text",{class:"record-label"},"\u8BB0\u5F55\u65F6\u95F4:"),(0,e.createElementVNode)("u-text",{class:"record-value"},(0,e.toDisplayString)(r.formatDate(n.data_update)),1)])]),(0,e.createElementVNode)("view",{class:"record-actions"},[(0,e.createElementVNode)("view",{class:"action-btn view-btn",onClick:y=>r.viewRecord(n)},[(0,e.createElementVNode)("u-image",{class:"action-img",src:f})],8,["onClick"]),(0,e.createElementVNode)("view",{class:"action-btn delete-btn",onClick:y=>r.deleteRecord(n)},[(0,e.createElementVNode)("u-image",{class:"action-img",src:T})],8,["onClick"])])])])]))),128)),r.filteredRecords.length===0?((0,e.openBlock)(),(0,e.createElementBlock)("view",{key:0,class:"no-data"},[(0,e.createElementVNode)("u-text",{class:"no-data-text"},"\u6682\u65E0\u7B26\u5408\u6761\u4EF6\u7684\u6570\u636E")])):(0,e.createCommentVNode)("",!0)]),r.totalPages>0?((0,e.openBlock)(),(0,e.createElementBlock)("view",{key:1,class:"pagination"},[(0,e.createElementVNode)("view",{class:(0,e.normalizeClass)(["pagination-btn",{disabled:i.currentPage===1}]),onClick:a[4]||(a[4]=(...n)=>r.prevPage&&r.prevPage(...n))},[(0,e.createElementVNode)("u-text",{class:"pagination-text"},"\u4E0A\u4E00\u9875")],2),(0,e.createElementVNode)("view",{class:"pagination-info"},[(0,e.createElementVNode)("u-text",{class:"pagination-text"},(0,e.toDisplayString)(i.currentPage)+"/"+(0,e.toDisplayString)(r.totalPages),1)]),(0,e.createElementVNode)("view",{class:(0,e.normalizeClass)(["pagination-btn",{disabled:i.currentPage===r.totalPages}]),onClick:a[5]||(a[5]=(...n)=>r.nextPage&&r.nextPage(...n))},[(0,e.createElementVNode)("u-text",{class:"pagination-text"},"\u4E0B\u4E00\u9875")],2),(0,e.createElementVNode)("view",{class:"pagination-jump"},[(0,e.createElementVNode)("u-text",{class:"pagination-text jump-label"},"\u8DF3\u8F6C\u5230"),(0,e.createElementVNode)("u-input",{class:"jump-input",type:"number",modelValue:i.jumpPage,onInput:a[6]||(a[6]=n=>i.jumpPage=n.detail.value),onBlur:a[7]||(a[7]=(...n)=>r.handleJumpBlur&&r.handleJumpBlur(...n)),onConfirm:a[8]||(a[8]=(...n)=>r.jumpToPage&&r.jumpToPage(...n))},null,40,["modelValue"]),(0,e.createElementVNode)("u-text",{class:"pagination-text jump-label"},"\u9875"),(0,e.createElementVNode)("view",{class:"pagination-btn jump-btn",onClick:a[9]||(a[9]=(...n)=>r.jumpToPage&&r.jumpToPage(...n))},[(0,e.createElementVNode)("u-text",{class:"pagination-text"},"\u786E\u5B9A")])])])):(0,e.createCommentVNode)("",!0),i.showFileContent?((0,e.openBlock)(),(0,e.createElementBlock)("view",{key:2,class:"file-modal"},[(0,e.createElementVNode)("view",{class:"modal-mask",onClick:a[10]||(a[10]=(...n)=>r.closeFileContent&&r.closeFileContent(...n))}),(0,e.createElementVNode)("view",{class:"modal-content"},[(0,e.createElementVNode)("view",{class:"modal-header"},[(0,e.createElementVNode)("u-text",{class:"modal-title"},(0,e.toDisplayString)(i.currentFileName),1),(0,e.createElementVNode)("view",{class:"modal-close",onClick:a[11]||(a[11]=(...n)=>r.closeFileContent&&r.closeFileContent(...n))},[(0,e.createElementVNode)("u-text",{class:"close-icon"},"\xD7")])]),(0,e.createElementVNode)("scroll-view",{class:"modal-body",scrollY:"true"},[(0,e.createElementVNode)("u-text",{class:"file-content"},(0,e.toDisplayString)(i.fileContent),1)])])])):(0,e.createCommentVNode)("",!0)])])}var u=g(M,[["render",q],["styles",[U]]]);var m=plus.webview.currentWebview();if(m){let t=parseInt(m.id),a="pages/tabBar/API/API",o={};try{o=JSON.parse(m.__query__)}catch(i){}u.mpType="page";let s=Vue.createPageApp(u,{$store:getApp({allowDefault:!0}).$store,__pageId:t,__pagePath:a,__pageQuery:o});s.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...u.styles||[]])),s.mount("#root")}})();
